<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BLACK DRAGON - Tienda</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>
        body { background-color: #f2f2f2; }
        .logo { font-size: 28px; font-weight: bold; letter-spacing: 2px; }
        .producto img { height: 180px; object-fit: cover; }
        .oculto { display: none; }
        .categoria-btn { margin-right: 5px; }
        .card-product:hover { transform: scale(1.02); transition: 0.25s; }
    </style>
</head>
<body>

<header class="text-white text-center p-3" style="background:#0d6efd">
    <div class="container d-flex align-items-center justify-content-between">
        <div class="d-flex align-items-center gap-3">
            <h1 class="logo m-0">BLACK DRAGON</h1>
        </div>
        <nav>
            <button class="btn btn-light btn-sm me-1" onclick="mostrar('inicio')">Inicio</button>
            <button class="btn btn-light btn-sm me-1" onclick="mostrar('productos')">Productos</button>
            <button class="btn btn-light btn-sm me-1" onclick="mostrar('compras')">Carrito (<span id="contadorCarrito">0</span>)</button>
            <button class="btn btn-warning btn-sm me-1" onclick="mostrar('auth')">Login / Registro</button>
            <button class="btn btn-light btn-sm" onclick="mostrar('contacto')">Contacto</button>
        </nav>
    </div>
</header>

<main class="container my-4">
    <!-- INICIO -->
    <section id="inicio">
        <div class="row align-items-center">
            <div class="col-md-7">
                <h2 class="mb-3">Black Dragon — Todo para gamers</h2>
                <p class="lead">Encuentra periféricos, sillas gamer, ropa, accesorios y más con la mejor calidad para tu setup.</p>
                <ul>
                    <li>Teclados mecánicos RGB</li>
                    <li>Mouse gamer de alta precisión</li>
                    <li>Audífonos con cancelación de ruido</li>
                    <li>Sillas ergonómicas</li>
                </ul>
                <div class="mt-3">
                    <button class="btn btn-success me-2" onclick="mostrar('productos')">Ver catálogo</button>
                    <button class="btn btn-outline-primary" onclick="mostrar('auth')">Iniciar sesión / Registro</button>
                </div>
            </div>
            <div class="col-md-5 text-center">
                <img src="https://via.placeholder.com/420x260" class="img-fluid rounded shadow" alt="Hero">
            </div>
        </div>

        <hr class="my-4">
        <h3 class="mb-3">Productos Destacados</h3>
        <div class="row g-3">
            <div class="col-md-4">
                <div class="card card-product shadow">
                    <img src="https://via.placeholder.com/300x180" class="card-img-top" alt="Camiseta Gamer">
                    <div class="card-body text-center">
                        <h5>Camiseta Gamer</h5>
                        <p>$39.900</p>
                        <button class="btn btn-success" onclick="agregarCarrito(5)">Agregar</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card card-product shadow">
                    <img src="https://via.placeholder.com/300x180" class="card-img-top" alt="Mouse RGB">
                    <div class="card-body text-center">
                        <h5>Mouse RGB</h5>
                        <p>$59.900</p>
                        <button class="btn btn-success" onclick="agregarCarrito(2)">Agregar</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card card-product shadow">
                    <img src="https://via.placeholder.com/300x180" class="card-img-top" alt="Teclado">
                    <div class="card-body text-center">
                        <h5>Teclado Mecánico RGB</h5>
                        <p>$129.900</p>
                        <button class="btn btn-success" onclick="agregarCarrito(1)">Agregar</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- PRODUCTOS -->
    <section id="productos" class="oculto my-4">
        <h2 class="text-center mb-4">Catálogo de Productos</h2>
        <div class="row" id="listaProductos"></div>
    </section>

    <!-- COMPRAS -->
    <section id="compras" class="oculto my-4">
        <h2 class="text-center mb-4">Carrito de Compras</h2>
        <div id="carrito"></div>
        <div class="d-flex justify-content-end mt-3">
            <button class="btn btn-success" onclick="simularCompra()">Finalizar Compra</button>
        </div>
    </section>

    <!-- AUTH -->
    <section id="auth" class="oculto my-4" style="max-width:540px;">
        <div class="card p-4 shadow mx-auto">
            <h3 class="text-center">Iniciar Sesión</h3>
            <form id="loginForm">
                <label>Email</label>
                <input type="email" id="loginEmail" class="form-control mb-2" required>
                <label>Contraseña</label>
                <input type="password" id="loginPass" class="form-control mb-2" required>
                <button class="btn btn-primary w-100">Entrar</button>
            </form>
            <p class="text-center mt-3">¿No tienes cuenta? <a href="#" onclick="toggleRegistro()">Regístrate aquí</a></p>
            <div id="registroPanel" class="oculto mt-3">
                <h4 class="text-center">Registro</h4>
                <form id="registerForm">
                    <label>Email</label>
                    <input type="email" id="regEmail" class="form-control mb-2" required>
                    <label>Contraseña</label>
                    <input type="password" id="regPass" class="form-control mb-2" required>
                    <button class="btn btn-success w-100">Registrar</button>
                </form>
            </div>
        </div>
    </section>

    <!-- CONTACTO -->
    <section id="contacto" class="oculto my-4">
        <h2 class="text-center mb-4">Contáctanos</h2>
        <div class="row justify-content-center">
            <div class="col-md-6">
                <div class="card p-4 shadow">
                    <h4 class="text-center mb-3">Información de Contacto</h4>
                    <p><i class="bi bi-envelope"></i> Correo: <strong>soporte.blackdragonstore@gmail.com</strong></p>
                    <p><i class="bi bi-telephone"></i> Teléfono / WhatsApp: <strong>+57 320 987 4563</strong></p>
                    <p><i class="bi bi-instagram"></i> Instagram: <strong>@blackdragon.store</strong></p>
                    <p><i class="bi bi-facebook"></i> Facebook: <strong>Black Dragon Store Oficial</strong></p>
                    <hr>
                    <h5 class="text-center mb-3">Enviar un mensaje</h5>
                    <form id="formContacto">
                        <label>Nombre</label>
                        <input type="text" id="contNombre" class="form-control mb-3" required>
                        <label>Correo</label>
                        <input type="email" id="contCorreo" class="form-control mb-3" required>
                        <label>Mensaje</label>
                        <textarea id="contMsg" class="form-control mb-3" rows="3" required></textarea>
                        <label>Contraseña (opcional)</label>
                        <input type="password" id="contPass" class="form-control mb-3">
                        <button class="btn btn-primary w-100">Enviar</button>
                    </form>
                </div>
            </div>
        </div>
    </section>
</main>

<footer class="text-center p-3 bg-dark text-white mt-5">
    © 2025 BLACK DRAGON - Todos los derechos reservados
</footer>

<!-- SCRIPTS -->
<script>
// Encapsulamos inicialización en DOMContentLoaded y exponemos funciones necesarias en window
window.addEventListener('DOMContentLoaded', function() {
    // Datos
    const productos = [
        {id:1, nombre:'Teclado Mecánico RGB', precio:129900, img:'https://via.placeholder.com/300x180'},
        {id:2, nombre:'Mouse Gamer 7200 DPI', precio:69900, img:'https://via.placeholder.com/300x180'},
        {id:3, nombre:'Audífonos RGB', precio:99900, img:'https://via.placeholder.com/300x180'},
        {id:4, nombre:'Silla Gamer Pro', precio:499900, img:'https://via.placeholder.com/300x180'},
        {id:5, nombre:'Camiseta Gamer', precio:39900, img:'https://via.placeholder.com/300x180'},
        {id:6, nombre:'Pad Mouse XL', precio:29900, img:'https://via.placeholder.com/300x180'},
    ];

    // Estado
    let carrito = [];

    // Exponer contador para header
    function actualizarContador() {
        const el = document.getElementById('contadorCarrito');
        if (!el) return;
        const totalItems = carrito.reduce((s, i) => s + i.cantidad, 0);
        el.innerText = totalItems;
    }

    // Render productos en sección catálogo
    function cargarProductos() {
        const cont = document.getElementById('listaProductos');
        if (!cont) return;
        cont.innerHTML = '';
        productos.forEach(p => {
            cont.innerHTML += `
            <div class="col-md-4 mb-3">
                <div class="card producto shadow card-product">
                    <img src="${p.img}" class="card-img-top" alt="${p.nombre}">
                    <div class="card-body text-center">
                        <h5>${p.nombre}</h5>
                        <p>$${p.precio.toLocaleString()}</p>
                        <button class="btn btn-success" onclick="agregarCarrito(${p.id})">Agregar</button>
                    </div>
                </div>
            </div>`;
        });
    }

    // Exponer agregarCarrito al scope window (para onclick HTML)
    window.agregarCarrito = function(id) {
        const prod = productos.find(x => x.id === id);
        if (!prod) return alert('Producto no encontrado');

        const existente = carrito.find(i => i.id === id);
        if (existente) {
            existente.cantidad++;
        } else {
            carrito.push({ id: prod.id, nombre: prod.nombre, precio: prod.precio, cantidad: 1 });
        }
        actualizarCarrito();
        actualizarContador();
    };

    // Actualizar vista del carrito
    function actualizarCarrito() {
        const div = document.getElementById('carrito');
        if (!div) return;
        div.innerHTML = '';
        if (carrito.length === 0) {
            div.innerHTML = '<p>No hay productos en el carrito.</p>';
            return;
        }
        carrito.forEach((p, i) => {
            const row = document.createElement('div');
            row.className = 'd-flex justify-content-between align-items-center border p-2 mb-2';
            row.innerHTML = `
                <div>
                    <strong>${p.nombre}</strong><br>
                    <small>Cantidad: <span id="cant-${i}">${p.cantidad}</span></small>
                </div>
                <div class="text-end">
                    <div>$${(p.precio * p.cantidad).toLocaleString()}</div>
                    <div class="mt-2">
                        <button class="btn btn-sm btn-secondary me-1" onclick="cambiarCantidad(${i}, 1)">+</button>
                        <button class="btn btn-sm btn-secondary me-1" onclick="cambiarCantidad(${i}, -1)">-</button>
                        <button class="btn btn-sm btn-danger" onclick="eliminar(${i})">Eliminar</button>
                    </div>
                </div>
            `;
            div.appendChild(row);
        });
        const total = carrito.reduce((sum, it) => sum + it.precio * it.cantidad, 0);
        const totalDiv = document.createElement('div');
        totalDiv.className = 'text-end mt-3';
        totalDiv.innerHTML = `<h4>Total: $${total.toLocaleString()}</h4>`;
        div.appendChild(totalDiv);
    }

    // Exponer actualizarCarrito para uso cuando se muestra sección compras
    window.actualizarCarrito = function() { actualizarCarrito(); };

    // Cambiar cantidad
    window.cambiarCantidad = function(i, delta) {
        if (!carrito[i]) return;
        carrito[i].cantidad += delta;
        if (carrito[i].cantidad <= 0) carrito.splice(i, 1);
        actualizarCarrito();
        actualizarContador();
    };

    // Eliminar
    window.eliminar = function(i) {
        carrito.splice(i,1);
        actualizarCarrito();
        actualizarContador();
    };

    // Simular compra
    window.simularCompra = function() {
        if (carrito.length === 0) return alert('Tu carrito está vacío');
        const total = carrito.reduce((sum, it) => sum + it.precio * it.cantidad, 0);
        alert(`Compra exitosa. Total: $${total.toLocaleString()}\n¡Gracias por comprar en Black Dragon!`);
        carrito = [];
        actualizarCarrito();
        actualizarContador();
        mostrar('inicio');
    };

    // Form contacto
    const formContacto = document.getElementById('formContacto');
    if (formContacto) {
        formContacto.addEventListener('submit', function(e) {
            e.preventDefault();
            const nombre = document.getElementById('contNombre').value;
            const correo = document.getElementById('contCorreo').value;
            const mensaje = document.getElementById('contMsg').value;
            const pass = document.getElementById('contPass').value;
            alert(`Mensaje enviado\nNombre: ${nombre}\nCorreo: ${correo}\nMensaje: ${mensaje}${pass ? '\nContraseña: ' + pass : ''}`);
            formContacto.reset();
        });
    }

    // Login / register
    const loginForm = document.getElementById('loginForm');
    if (loginForm) {
        loginForm.addEventListener('submit', function(e) {
            e.preventDefault();
            alert('Inicio de sesión exitoso (simulado)');
            mostrar('usuario');
        });
    }
    const registerForm = document.getElementById('registerForm');
    if (registerForm) {
        registerForm.addEventListener('submit', function(e) {
            e.preventDefault();
            alert('Registro exitoso (simulado)');
            mostrar('usuario');
        });
    }

    // Pestaña usuario (mostramos datos simulados)
    window.mostrarUsuario = function(email) {
        const el = document.getElementById('userEmail');
        if (el) el.innerText = email || 'demo@demo.com';
        mostrar('usuario');
    };

    // Inicializar productos en catálogo
    cargarProductos();

}); // end DOMContentLoaded

// Funciones globales que usan mostrar y toggleRegistro
function mostrar(id) {
    document.querySelectorAll('main section').forEach(s => s.classList.add('oculto'));
    const el = document.getElementById(id);
    if (el) el.classList.remove('oculto');
    if (id === 'compras') window.actualizarCarrito && window.actualizarCarrito();
}
function toggleRegistro() {
    const panel = document.getElementById('registroPanel');
    if (panel) panel.classList.toggle('oculto');
}

// Mostrar usuario panel simple
function cerrarSesion() {
    alert('Sesión cerrada (simulada)');
    mostrar('inicio');
}
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
